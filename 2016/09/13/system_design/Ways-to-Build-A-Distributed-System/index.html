
 <!DOCTYPE HTML>
<html lang="default">
<head>
  <meta charset="UTF-8">
  
    <title>Ways to Build A Distributed System | Better Programmer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="FreeTymeKiyan">
    
    <meta name="description" content="Every engineer should learn about distributed system design, since it is not only the path to next career level, but a necessary ability to build a la">
    
    
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="FreeTymeKiyan" />
    <meta name="twitter:title" content="Ways to Build A Distributed System | Better Programmer" />
      
    
    
    <link rel="alternative" href="/atom.xml" title="Better Programmer" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/logo_apple.png">
    <link rel="apple-touch-icon-precomposed" href="/img/logo_apple.png">
    
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-3830008196770332",
    enable_page_level_ads: true
  });
</script>
    <header>
      <div>
  
    <div id="imglogo">
      <a href="/"><img src="/img/logo.png" alt="Better Programmer" title="Better Programmer"/></a>
    </div>
    
    <div id="textlogo">
      <h1 class="site-name"><a href="/" title="Better Programmer">Better Programmer</a></h1>
      <h2 class="blog-motto">Where best programming happens</h2>
    </div>
    <div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
    </a></div>
    <nav class="animated">
      <ul>
        <ul>
         
          <li><a href="/words">Words</a></li>
        
          <li><a href="/about">About</a></li>
        
        <li>
        
        <form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
          <label>Search</label>
          <input type="search" id="search" autocomplete="off" name="q" maxlength="20" placeholder="Search" />
        </form>
        
        </li>
      </ul>
    </nav>
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/13/system_design/Ways-to-Build-A-Distributed-System/" title="Ways to Build A Distributed System" itemprop="url">Ways to Build A Distributed System</a>
  </h1>
  <p class="article-author">By
       
		<a href="http://blog.kiyanpro.com/about" title="FreeTymeKiyan" target="_blank" itemprop="author">FreeTymeKiyan</a>
		
  
  <p class="article-time">
    <time datetime="2016-09-13T20:58:24.000Z" itemprop="datePublished">Published on Sep 13 2016</time>
  </p>
  
  <p class="article-read-time">
    <span class="post-count">1,421 words in 9 minutes</span>
  </p>
</header>
	<div class="article-content">
		
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Techniques"><span class="toc-number">1.</span> <span class="toc-text">Techniques</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Handling-user-requests"><span class="toc-number">1.1.</span> <span class="toc-text">Handling user requests</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Comparing-the-technologies"><span class="toc-number">1.1.1.</span> <span class="toc-text">Comparing the technologies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scaling-Up"><span class="toc-number">1.1.2.</span> <span class="toc-text">Scaling Up</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scaling-Out"><span class="toc-number">1.1.3.</span> <span class="toc-text">Scaling Out</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Software-Load-Balancer"><span class="toc-number">1.1.4.</span> <span class="toc-text">Software Load Balancer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS-Load-Balancer"><span class="toc-number">1.1.5.</span> <span class="toc-text">DNS Load Balancer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Auto-Scaling"><span class="toc-number">1.1.6.</span> <span class="toc-text">Auto Scaling</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Storing-the-data"><span class="toc-number">1.2.</span> <span class="toc-text">Storing the data</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Estimation-on-data-sizes"><span class="toc-number">1.2.1.</span> <span class="toc-text">Estimation on data sizes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Adding-Indexes"><span class="toc-number">1.2.2.</span> <span class="toc-text">Adding Indexes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Replication"><span class="toc-number">1.2.3.</span> <span class="toc-text">Replication</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-partitioning-Sharding"><span class="toc-number">1.2.4.</span> <span class="toc-text">Data partitioning (Sharding)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#In-memory-cache"><span class="toc-number">1.2.5.</span> <span class="toc-text">In-memory cache</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">2.</span> <span class="toc-text">Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">3.</span> <span class="toc-text">References</span></a></li></ol>
		
		</div>
		
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle"
         style="display:block; text-align:center;"
         data-ad-format="fluid"
         data-ad-layout="in-article"
         data-ad-client="ca-pub-3830008196770332"
         data-ad-slot="5533097515"></ins>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
		<p>Every engineer should learn about distributed system design, since it is not only the path to next career level, but a necessary ability to build a large-scale application according to use cases and specifications as well. Without a proper design, it would be impossible to implement and manage such a system afterwards. </p>
<p>Today I read through “The Twitter Problem”<sup><a href="#References">[1]</a></sup> on hiredintech.com and found it truly useful and easy to understand. This post is a summary on the classic problems and solutions when building a scalable system. These problems are generally met in most of the large applications and are well solved by those extraordinary predecessors. </p>
<h2 id="Techniques"><a href="#Techniques" class="headerlink" title="Techniques"></a>Techniques</h2><p>These techniques are divided into two parts: 1) Handling user requests 2) Storing the data. </p>
<h3 id="Handling-user-requests"><a href="#Handling-user-requests" class="headerlink" title="Handling user requests"></a>Handling user requests</h3><p>Suppose we already know what kind of system, how many requests approximately, and how complex the requests are. What are the ways to handle these requests?</p>
<h4 id="Comparing-the-technologies"><a href="#Comparing-the-technologies" class="headerlink" title="Comparing the technologies"></a>Comparing the technologies</h4><p>One aspect can be the technologies used to implement the application. Some technologies are specially designed for high concurrency situation with less memory usage. This can enhance the load handled by a single machine. With some research on these technologies, we can know the number of requests that can be handled by a single machine for each of them. Then pick the one that performs the best. </p>
<p>One possible problem for this pre-research is time consuming. But it is worth it since the comparison result is reusable for the next design. Another downside can be that the best technology chosen may not be familiar to the team, or even not easier to pick up at all. All these factors should be considered before making the final decision. </p>
<h4 id="Scaling-Up"><a href="#Scaling-Up" class="headerlink" title="Scaling Up"></a>Scaling Up</h4><p>Scailing up means improving a single machine. Think about the aspects you can improve, such as the CPU, the memory, the disk and etc. Examples are like replace CPU with more cores, increase the size of memory, and upgrade to SSD drive. </p>
<p>This approach is useful in some cases, but after a given point, the hardware of one machine just is not capable of handling all the requests. It would also be a single point of failure if the machine goes down. </p>
<h4 id="Scaling-Out"><a href="#Scaling-Out" class="headerlink" title="Scaling Out"></a>Scaling Out</h4><p>Scaling out basically means adding more nodes and building a cluster. The load is distributed to a number of machines instead of one. </p>
<p>The approach is better generally, as it avoids single point failure and is easy to scale. When the current cluster cannot handle the load well, we can config a new machine and add it to the cluster. And if we know how many requests one node can handle, we can easily estimate how many nodes we need for a cluster as well. </p>
<h4 id="Software-Load-Balancer"><a href="#Software-Load-Balancer" class="headerlink" title="Software Load Balancer"></a>Software Load Balancer</h4><p>We can run a software load balancer on a machine in front of the application cluster. With proper configuration, the load balancer will forward the request to the actual node behind it in the cluster, thus distributing the load across. Classic software load balancers are nginx and HAProxy. Some cloud providers like AWS also provide traffic load balancing as a service. </p>
<p>Software load balancer definitely adds resiliency to an application. It is almost a must-have in distributed systems. But it can also be the bottleneck if the number of requests is too high and exceeds the capability of one single load balancer node. </p>
<h4 id="DNS-Load-Balancer"><a href="#DNS-Load-Balancer" class="headerlink" title="DNS Load Balancer"></a>DNS Load Balancer</h4><p>We can config a DNS server to parse domain to different hosts. This DNS load balancer is in front of software load balancer and can forward requests to different software load balancers. In this way, the system can handle even more requests and further scale out. </p>
<h4 id="Auto-Scaling"><a href="#Auto-Scaling" class="headerlink" title="Auto Scaling"></a>Auto Scaling</h4><p>Auto scaling is the ability to adjust the number of nodes in a cluster according current traffic level. Services like AWS and Heroku offer this kind of support. </p>
<p>This technique is specifically useful when it comes to unusual high traffic, where caching is not that efficient. The system will respond to the traffic and add more nodes if the traffic is too high, then reclaim those nodes when the traffic goes down to normal. </p>
<h3 id="Storing-the-data"><a href="#Storing-the-data" class="headerlink" title="Storing the data"></a>Storing the data</h3><h4 id="Estimation-on-data-sizes"><a href="#Estimation-on-data-sizes" class="headerlink" title="Estimation on data sizes"></a>Estimation on data sizes</h4><p>Assume that we know the relations between our data objects, we can assess the approximate size of the data to be stored. For example, in a simple twitter problem, we have 10 million users and each of them post 1 tweet per day. Each tweet contains 140 characters. If we assume 2 bytes per character, it will be 2 <em> 140 </em> 10bln = 2.6 TB for a day. </p>
<p>After a quick analysis on all possible data to be stored, there can be some data that takes up majority of the storage space. It is important to have a rough idea about the size of the data that the system will need to handle. Appropriate design decisions base on this. </p>
<h4 id="Adding-Indexes"><a href="#Adding-Indexes" class="headerlink" title="Adding Indexes"></a>Adding Indexes</h4><p>In relational DB, adding indexes to a specific field enables executing quick queries joining tables. If we know some fields are used frequently in filtering queries, we definitely should build an index over the field to optimize the times for such queries.</p>
<p>After creating the indexes, write queries will become slightly slower. Considering the time we can save for heavy read operations it is still worth it. </p>
<h4 id="Replication"><a href="#Replication" class="headerlink" title="Replication"></a>Replication</h4><p>With all the read requests coming to DB, we can have several replications that hold a copy of the data each. </p>
<p>This will help only if the write operations does not increase dramatically at the same time. Otherwise, it will be complicated to sync data between primary and replications. </p>
<h4 id="Data-partitioning-Sharding"><a href="#Data-partitioning-Sharding" class="headerlink" title="Data partitioning (Sharding)"></a>Data partitioning (Sharding)</h4><p>Divide the data in some way to several databases. After that, each DB will hold only part of the data, and also, share only part of the requests. </p>
<p>If we have several databases and each of them only has part of the data, the read and write will speed up since the load is smaller. But a way should be pre-defined before partitioning. Otherwise we won’t be able to know which DB a specific request should go to. And also, because the data size is smaller for each DB, it makes administration tasks like backups faster. </p>
<h4 id="In-memory-cache"><a href="#In-memory-cache" class="headerlink" title="In-memory cache"></a>In-memory cache</h4><p>In order to handle the incoming read requests, we can add an in-memory cache in front of the relational DB. The reason why this works is that DB reads directly from disk, and it is much slower than from memory. Even if the DB has its own caching mechanisms, a separate cache layer enables us to gain more control over what to be cached and how. </p>
<p>An in-memory cache will save us a lot of direct reads to DB. And since the results of most frequent requests is cached, the system is more resilient to usual traffic peaks. </p>
<h2 id="Summary"><a href="#Summary" class="headerlink" title="Summary"></a>Summary</h2><p>These techniques from “The Twitter Problem” are described and analyzed at a very high level, so that we can have an general idea on each of them. This example also already showed what it is actually like to design a distributed system (or answer such problems in an interview). The next steps may be learning the actually theories behind each step mentioned, figuring out the reasons, and diving deep into each of those technologies. </p>
<h2 id="References"><a href="#References" class="headerlink" title="References"></a>References</h2><ol>
<li><a href="http://www.hiredintech.com/data/uploads/hiredintech_system_design_the_twitter_problem_beta.pdf" target="_blank" rel="external">The Twitter Problem, hiredintech.com</a></li>
</ol>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-license">
  <div class="centered">
    <img src="http://i.creativecommons.org/l/by-nc-sa/3.0/88x31.png" /> 
    <p>
    This post by <a href="http://freetymekiyan.github.io/">Yang Liu</a> is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International</a>.<br> Please NOTE THE ORIGIN for Reproduction, Copying or other usages.
    </p>
  </div>
</div>


<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/Coding/">Coding</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/Notes/">Notes</a><a href="/tags/System-Design/">System Design</a>
  </div>




<div class="article-share" id="share">

  <div data-url="http://blog.kiyanpro.com/2016/09/13/system_design/Ways-to-Build-A-Distributed-System/" data-title="Ways to Build A Distributed System | Better Programmer" data-tsina="2090687247" class="share clearfix">
  </div>

</div>
</footer>   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/09/21/system_design/back-of-the-envelope-calculation/" title="Back of the Envelope Calculation">
  <strong>Prev:</strong><br/>
  <span>
  Back of the Envelope Calculation</span>
</a>
</div>


<div class="next">
<a href="/2016/04/22/java/Java8ForTheReallyImpatient/Java-SE-8-For-the-Really-Impatient/"  title="Java SE 8 For the Really Impatient Series">
 <strong>Next:</strong><br/> 
 <span>Java SE 8 For the Really Impatient Series
</span>
</a>
</div>

</nav>

	

<section class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#Techniques"><span class="toc-number">1.</span> <span class="toc-text">Techniques</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Handling-user-requests"><span class="toc-number">1.1.</span> <span class="toc-text">Handling user requests</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Comparing-the-technologies"><span class="toc-number">1.1.1.</span> <span class="toc-text">Comparing the technologies</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scaling-Up"><span class="toc-number">1.1.2.</span> <span class="toc-text">Scaling Up</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Scaling-Out"><span class="toc-number">1.1.3.</span> <span class="toc-text">Scaling Out</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Software-Load-Balancer"><span class="toc-number">1.1.4.</span> <span class="toc-text">Software Load Balancer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#DNS-Load-Balancer"><span class="toc-number">1.1.5.</span> <span class="toc-text">DNS Load Balancer</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Auto-Scaling"><span class="toc-number">1.1.6.</span> <span class="toc-text">Auto Scaling</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Storing-the-data"><span class="toc-number">1.2.</span> <span class="toc-text">Storing the data</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Estimation-on-data-sizes"><span class="toc-number">1.2.1.</span> <span class="toc-text">Estimation on data sizes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Adding-Indexes"><span class="toc-number">1.2.2.</span> <span class="toc-text">Adding Indexes</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Replication"><span class="toc-number">1.2.3.</span> <span class="toc-text">Replication</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Data-partitioning-Sharding"><span class="toc-number">1.2.4.</span> <span class="toc-text">Data partitioning (Sharding)</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#In-memory-cache"><span class="toc-number">1.2.5.</span> <span class="toc-text">In-memory cache</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Summary"><span class="toc-number">2.</span> <span class="toc-text">Summary</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#References"><span class="toc-number">3.</span> <span class="toc-text">References</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  
<div class="categorieslist">
  <p class="asidetitle">Categories</p>
    <ul>
    
      
    
      
    
      
        <li><a href="/categories/Coding/" title="Coding">Coding<sup>30</sup></a></li>
      
    
      
    
      
    
      
        <li><a href="/categories/People/" title="People">People<sup>1</sup></a></li>
      
    
      
    
      
    
      
        <li><a href="/categories/Translation/" title="Translation">Translation<sup>24</sup></a></li>
      
    
      
    
      
        <li><a href="/categories/Words/" title="Words">Words<sup>4</sup></a></li>
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
    </ul>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS</a>
</div>

  
<div class="tagslist">
  <p class="asidetitle">Tags</p>
    <ul class="clearfix">
    
      
        <li><a href="/tags/Notes/" title="Notes">Notes<sup>26</sup></a></li>
      
    
      
        <li><a href="/tags/Kai-Fu-Lee/" title="Kai Fu Lee">Kai Fu Lee<sup>24</sup></a></li>
      
    
      
        <li><a href="/tags/LinkedIn/" title="LinkedIn">LinkedIn<sup>24</sup></a></li>
      
    
      
        <li><a href="/tags/Java/" title="Java">Java<sup>14</sup></a></li>
      
    
      
        <li><a href="/tags/Elasticsearch/" title="Elasticsearch">Elasticsearch<sup>4</sup></a></li>
      
    
      
        <li><a href="/tags/Thoughts/" title="Thoughts">Thoughts<sup>3</sup></a></li>
      
    
      
        <li><a href="/tags/Pro-tips/" title="Pro-tips">Pro-tips<sup>3</sup></a></li>
      
    
      
        <li><a href="/tags/System-Design/" title="System Design">System Design<sup>3</sup></a></li>
      
    
      
        <li><a href="/tags/Node-js/" title="Node.js">Node.js<sup>3</sup></a></li>
      
    
      
        <li><a href="/tags/TextMate-2/" title="TextMate 2">TextMate 2<sup>1</sup></a></li>
      
    
      
        <li><a href="/tags/Android/" title="Android">Android<sup>1</sup></a></li>
      
    
      
        <li><a href="/tags/Hexo/" title="Hexo">Hexo<sup>1</sup></a></li>
      
    
      
        <li><a href="/tags/Interview/" title="Interview">Interview<sup>1</sup></a></li>
      
    
      
        <li><a href="/tags/Test/" title="Test">Test<sup>1</sup></a></li>
      
    
      
        <li><a href="/tags/Algorithms/" title="Algorithms">Algorithms<sup>1</sup></a></li>
      
    
      
    
      
    
      
    
      
    
      
    
    </ul>
</div>


  <div class="adlist">
  <p class="asidetitle">Google Ads</p>
  <div class="ad">
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <!-- Hexo plugin -->
    <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-3830008196770332"
       data-ad-slot="9691834371"
       data-ad-format="auto"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  </div>
</div>


  
  <div class="archiveslist">
    <p class="asidetitle"><a href="/archives">Archives</a></p>
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a><span class="archive-list-count">14</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/02/">February 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">October 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/03/">March 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a><span class="archive-list-count">11</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/11/">November 2012</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a><span class="archive-list-count">4</span></li></ul>
  </div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
      <li><a href="http://hijiangtao.github.io/" target="_blank" title="JiangTao">Data.Blog</a></li>
      <li><a href="https://modulus.io/" target="_blank" title="Modulus, Node.js Host Provider.">Modulus</a></li>
    </ul>
</div>


  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Algorithms/" style="font-size: 10px;">Algorithms</a> <a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/Elasticsearch/" style="font-size: 14px;">Elasticsearch</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Interview/" style="font-size: 10px;">Interview</a> <a href="/tags/Java/" style="font-size: 16px;">Java</a> <a href="/tags/Kai-Fu-Lee/" style="font-size: 18px;">Kai Fu Lee</a> <a href="/tags/LinkedIn/" style="font-size: 18px;">LinkedIn</a> <a href="/tags/Node-js/" style="font-size: 12px;">Node.js</a> <a href="/tags/Notes/" style="font-size: 20px;">Notes</a> <a href="/tags/Pro-tips/" style="font-size: 12px;">Pro-tips</a> <a href="/tags/System-Design/" style="font-size: 12px;">System Design</a> <a href="/tags/Test/" style="font-size: 10px;">Test</a> <a href="/tags/TextMate-2/" style="font-size: 10px;">TextMate 2</a> <a href="/tags/Thoughts/" style="font-size: 12px;">Thoughts</a>
    </div>
  </div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
  
  <div class="line">
    <span></span>
    
    <a href="http://weibo.com/2090687247" target="_blank"><div class="author"></div></a>
    
  </div>
  
  
  <section class="info">
    <p> This is FreeTymeKiyan&#39;s blog.<br/>
      He always asks himself, how far can an indie programmer go? Definitely no limit on that.</p>
  </section>
   
  <div class="social-font" class="clearfix">
    
    <a href="http://weibo.com/2090687247" target="_blank" class="icon-weibo" title="weibo"></a>
    
    
    <a href="https://github.com/FreeTymeKiyan" target="_blank" class="icon-github" title="github"></a>
    
    
    
    <a href="https://twitter.com/FreeTymeKiyan" target="_blank" class="icon-twitter" title="twitter"></a>
    
    
    <a href="https://www.facebook.com/kiyan.fan" target="_blank" class="icon-facebook" title="facebook"></a>
    
    
    <a href="https://www.douban.com/people/56346857" target="_blank" class="icon-douban" title="豆瓣"></a>
    
    
    
    <a href="mailto:freetymesunkiyan@gmail.com" target="_blank" class="icon-email" title="Email Me"></a>
    
  </div>
    <p class="copyright">Powered by <a href="http://zespia.tw/hexo/" target="_blank" title="hexo">hexo</a> © 2012-2017
    
    <a href="http://blog.kiyanpro.com/about" target="_blank" title="FreeTymeKiyan">FreeTymeKiyan</a>
    
    , <span class='post-count'>117.8k</span> words
    </p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else
    {
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      h  = $('article h2')
      ah = $('article h2'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };

  c.click(function(){
    t.css('display','none');
    if(ah.length!==0){
      ta.css('display', 'block').addClass('fadeIn');
    }
  });
  o.click(function(){
    ta.css('display', 'none');
    if(ah.length!==0){
      t.css('display','block');
    }
  });

  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina');
  var html = [
  '<a href="#" class="overlay" id="qrcode"></a>',
  '<div class="qrcode clearfix"><span>Scan QR code and share<a class="qrclose" href="#share"></a></span><strong>Loading...Please wait</strong><img id="qrcode-pic" data-src="http://s.jiathis.com/qrcode.php?url=' + encodedUrl + '"/></div>',
  '<a href="#textlogo" class="article-back-to-top" title="Top"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="QRcode"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="Weibo"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);
  $('.article-share-qrcode').click(function(){
    var imgSrc = $('#qrcode-pic').attr('data-src');
    $('#qrcode-pic').attr('src', imgSrc);
    $('#qrcode-pic').load(function(){
        $('.qrcode strong').text(' ');
    });
  });
});     
</script>




<script type="text/javascript">

var disqus_shortname = 'FreeTymeKiyan';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>


<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-60456171-1', 'auto');  
ga('send', 'pageview');
</script>


<div id="totop">
<a title="Back to Top"><img src="/img/scrollup.png"/></a>
</div>

<script src="/js/totop.js"></script>

<script type="text/x-mathjax-config"> 
MathJax.Hub.Config({ 
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]} 
}); 
</script>
<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
  </body>
</html>
